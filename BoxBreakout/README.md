# 箱体突破交易策略 - BoxBreakout

## 📋 项目简介

基于箱体理论和支撑阻力体系的股票交易策略，专注于**价格突破 + 量比特征**的组合信号分析。本项目实现了简化而有效的技术分析框架，去除了复杂的技术指标依赖，回归价格行为和成交量的本质分析。

## 🚀 核心功能

### 1. 箱体识别与突破检测
- **ZigZag摆动点分析**：基于价格波动识别关键转折点
- **动态箱体构建**：自动识别价格运行的箱体区间
- **突破信号检测**：实时监测价格对箱体上下沿的突破

### 2. 支撑阻力分析
- **动态支撑阻力线**：基于历史价格行为绘制关键位置
- **位置关系判断**：根据当前价格位置动态调整支撑阻力属性
- **突破确认机制**：结合收盘价和成交量确认有效突破

### 3. 成交量与量比分析
- **成交量可视化**：直观展示成交量变化趋势
- **量比计算**：实时计算并显示量比指标
- **放量确认**：识别突破时的成交量放大特征

## 📊 图表展示

### 简化的2分图布局
1. **主图**：
   - K线图（开高低收）
   - ZigZag摆动线
   - 箱体区间标注
   - 支撑阻力线
   - 突破信号标记

2. **成交量/量比图**：
   - 成交量柱状图
   - 量比曲线
   - 放量信号标注

## 🛠️ 使用方法

### 环境要求
```bash
pip install pandas numpy matplotlib baostock
```

### 基本使用
```python
# 运行集成测试
python integrated_test.py

# 默认测试股票：sz.000063（中兴通讯）
# 可修改代码中的股票代码进行其他股票测试
```

### 自定义参数
```python
# 在integrated_test.py中可调整的关键参数：
- stock_code: 股票代码（如'sz.000063'）
- start_date: 开始日期（如'2024-01-01'）
- end_date: 结束日期（如'2024-12-31'）
- zigzag_threshold: ZigZag阈值（默认0.05，即5%）
```

## 📈 输出结果

### 1. 图表文件
- **格式**：PNG和JPG双格式保存
- **命名**：`integrated_test_{股票代码}_{日期时间}.png`
- **内容**：完整的技术分析图表

### 2. 测试结果
- **突破信号统计**：有效突破次数和成功率
- **量比确认率**：成交量放大的确认比例
- **后续验证**：突破后价格走势的验证结果

### 3. JSON数据
- **详细记录**：所有突破信号的详细数据
- **格式**：`test_results_{股票代码}_{日期时间}.json`

## 🎯 策略特点

### ✅ 优势
1. **简化有效**：去除复杂技术指标，专注核心逻辑
2. **视觉直观**：清晰的图表布局，便于分析决策
3. **实战导向**：基于实际交易经验设计
4. **参数可调**：支持不同市场环境的参数优化

### ⚠️ 注意事项
1. **量比标准**：当前量比放大标准需要进一步优化
2. **样本限制**：建议多股票测试验证策略普适性
3. **市场环境**：不同市场环境下策略表现可能有差异
4. **风险控制**：实际交易中需要配合适当的风险管理

## 📁 文件结构

```
BoxBreakout/
├── integrated_test.py          # 主测试脚本（v2.0简化版）
├── enhanced_analyzer.py        # 增强分析器
├── volume_ratio_analyzer.py    # 量比分析器
├── strategy_framework_v2.md    # 策略框架文档
├── README.md                   # 本文档
└── 生成的图表和数据文件/
```

## 🔄 版本历史

- **v1.0**：初始版本，包含MACD确认机制和6分图布局
- **v2.0**：策略重构版本
  - ✅ 移除MACD依赖
  - ✅ 简化为2分图布局
  - ✅ 优化图表视觉效果
  - ✅ 保持核心功能完整

## 📊 测试案例

### sz.000063（中兴通讯）测试结果
- **测试周期**：2024年全年数据
- **突破信号**：识别多个有效突破点
- **成功率**：后续验证成功率80%
- **图表输出**：生成完整的技术分析图表

## 🚀 后续优化方向

1. **量比标准优化**：基于大样本数据统计优化量比判断标准
2. **多股票验证**：扩大测试样本，验证策略在不同股票上的表现
3. **分时数据集成**：探索分时量比数据的获取和应用
4. **参数自适应**：开发自适应参数调整机制
5. **实盘验证**：在模拟或实盘环境中验证策略效果

## 📞 技术支持

如有问题或建议，请参考：
- `strategy_framework_v2.md`：详细的策略理论框架
- 代码注释：脚本中的详细功能说明
- 测试输出：图表和JSON文件中的详细数据

---

*最后更新：2025年1月25日*
*版本：v2.0*